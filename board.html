<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Page Title</title>
</head>
<body id = "body" style="padding-left:200px">

<script src="html2canvas.js"></script>
<script>
  function SaveBoard()
  {
    /*
    html2canvas(document.getElementById("MainBoard"), {
      //allowTaint:true,
      //foreignObjectRendering: true,
      useCORS:true,
      onrendered: function (canvas)
      {
        var img = canvas.toDataURL("image/png", 1.0);
        console.log(img);
        var userName = document.getElementById("name").innerHTML;
        const a = document.createElement("a");
        document.body.appendChild(a);
        a.href = img;
        a.download = userName + "-BINGCard.png"
        a.click();
        document.body.removeChild(a);
      }
    });
      */
      
    html2canvas(document.getElementById("MainBoard"),
      {
        //allowTaint:true,
        //useCORS:true
    }).then( canvas => {
        var url = canvas.toDataURL("image/png", 1.0);
        var userName = document.getElementById("name").innerHTML;
        const a = document.createElement("a");
        document.body.appendChild(a);
        a.href = url;
        a.download = userName + "-BINGCard.jpg";
        a.click();
        document.body.removeChild(a);   
    });
	
  /*
    html2canvas(document.getElementById("MainBoard"), {
        //allowTaint:true,
        //foreignObjectRendering: true,
        //useCORS:true,
        onrendered: function (canvas)
        {
          var img = canvas.toDataURL("image/png", 1.0);

          //var myCanvas = document.getElementById('my_canvas_id');
          var ctx = canvas.getContext('2d');
          var img2 = new Image;
          img.onload = function(){
            ctx.drawImage(img2,0,0); // Or at whatever offset you like
          };
          img2.src = strDataURI;

          console.log("img");
          var userName = document.getElementById("name").innerHTML;
          const a = document.createElement("a");
          document.body.appendChild(a);
          a.href = img;
          a.download = userName + "-BINGCard.png"
          a.click();
          document.body.removeChild(a);
        }
      });
*/
}
</script>

<div id="settingsDiv" style="padding-left:800px; padding-top:50px; position:absolute; /*border:1px; border-style:solid; display:inline;*/">
    <h1>Settings</h1>
    <form action="">
        <label for="fname">Your name (in japanese please!)</label><br>
        <input type="text" id="fname" name="fname" value="ジョジョ" onkeypress="return event.keyCode != 13"><br>
    </form>
    <button id="ButtonName" onclick="ChangeName()">Apply name</button>
    <br></br>
    <button id="ButtonImage" onclick="RegenerateAnimeImage(false)">Change Image</button>
    <button id="ButtonImage" onclick="RegenerateAnimeImage(true)" disabled>Change Image(WARNING!! NSFW)</button>
    <br></br>
    <button id="ButtonBoard" onclick="RegenerateBoard()">Regenerate board</button>

    <h2>Image Width</h2>
    <button id="width+" onclick="ChangeWidthButton(20)">+</button>
    <button id="width-" onclick="ChangeWidthButton(-20)">-</button>
    <input id="widthSlider" type="range" min="0" max="400" value="0" style="width:250px;" oninput="ChangeWidthSlider(value)">

    <h2>Image Height</h2>
    <button id="height+" onclick="ChangeHeightButton(10)">+</button>
    <button id="height-" onclick="ChangeHeightButton(-10)">-</button>
    <input id="heightSlider" type="range" min="-100" max="400" value="0" style="width:250px;" oninput="ChangeHeightSlider()">

    <h2>Save board as png</h2>
    <p4>Doesn't work sadly, you will have to take screenshot with your PC! Keep your screenshot within the <b><FONT COLOR="RED">red borders!</font></b></p4>
    <button id="saveBoard" onclick="SaveBoard()">Save board</button>

    <h2>Hide/Enable red borders</h2>
    <button id="HideRedBorders" onclick="DisableRedBorders()">Disable/Enable Red borders</button>
    <br></br>
    <button id="HideBoard" onclick="HideBoard()">Observe image</button>
</div>
<canvas id = "myCanvas" style="position:absolute"></canvas>
<div id="MainBoard" style="border:1px; border-style:dashed; border-color:red; display:inline; position:absolute">
  <div id="MainBoardChild" style="visibility:visible;">
    <div id="nameDiv">
      <h1 id="name" style = "text-align:center; text-shadow:1px 1px 1px rgba(255,255,255,1);">ジョジョ</h1>
    </div>
    <table id="table" border = "1 px">
    <tr id = "id1">

    </tr>
    <tr id = "id2">

    </tr>
    <tr id = "id3">

    </tr>
    <tr id = "id4">

    </tr>
    <tr id = "id5">

    </tr>
    </table>

    <script src="script.js" type="text/javascript">
    </script>

    <style id="style">
    </style>
  </div>
</div>

</body>
</html>
